<html>
	<head>
		<title>NodeJS guide</title>
		<meta content="">
		<style></style>
		<link rel="stylesheet" href="style.css">
	</head>
	<body>
		<div id="navBar">
			<nav>
				<table id="navTable">
					<tr>
						<td class="navTD"><a href="#WhatIS">What Is Node.js?</a></td>
						<td class="navTD"><a href="#Why">Why use Node.js?</a></td>
						<td class="navTD"><a href="#IDE">IDE Setup</a></td>
						<td class="navTD"><a href="#Linux">Linux Setup</a></td>
						<td class="navTD"><a href="#Routing">Routing</a></td>
					</tr>
				</table>
			</nav>
		</div>
		<br>
		<h1 align="center"> NodeJS's How to guide </h1>

		<article id="WhatIS">
			<br>
			<h2>What is NodeJs?</h2>

			<ul>
				<li>1</li>
				<li>2</li>
				<li>3</li>
			</ul>  
		</article>
		
		<article id="Why">
			<br>
			<h2>What are some pros of using NodeJS</h2>

			<ul>
				<li>1</li>
				<li>2</li>
				<li>3</li>
			</ul>  
		
			<h2>Why choose NodeJS over PHP</h2>

			<ul>
				<li>1</li>
				<li>2</li>
				<li>3</li>
			</ul>
		</article>

		<article id="IDE">
			<br>
			<h2>IDE</h2>

		</article>

		<article id="Linux">
			<br>
			<h2>Linux</h2>
			<p>The first thing you will need to do is install Node.js, npm, and express from your local repositories.</p>
			<p>After that you will have to create a package.json file.  It's purpose is to let Node.js what you are currently setting up.  The most important part is the dependencies.  They are provided in the format "dependancy" : "verion" where version can be "*" in order to grab whatever version is available.  After creating a package.json, you then run the command "npm install" to install all of those dependancies.  A basic package.json will look something like this:</p>
			<pre class="prettyprint linenums">
{
	"name": "Express-web-app",
	"version": "1.0.0",
	"dependencies":
	{
		"express": "~4.0.0",
		"ejs": "~1.0.0",
		"body-parser": "*"
	}
}
			</pre>
			<p>In this example we will be separating the server from the app for sake of modularity.  Inside of "server.js" we have to load express by using the "require" keyword.  Express is a library that makes it easier to handle full html pages with Node.js.  We then declare our app to be of the express type and load the app "main.js" using require.  Then, in line 4, we specify the "view" directory, which in this case is "/myHTML".  This tells the app to look for html pages in that directory.  Lines 5 and 6 set up "ejs" which is a library that helps us render the html.  Finallys, we tell the app to listen to port 3000.  Typically you would want to host on the standard port 80, however that requires root permissions on most machines.</p>
			<pre class="prettyprint linenums">
var express=require('express');
var app=express();
require('./main.js')(app);
app.set('views',__dirname + '/myHTML');
app.set('views engine', 'ejs');
app.engine('html', require('ejs').renderFile);
var server=app.listen(3000,function(){
	console.log("Express is running on port 3000");
});
			</pre>
			<p>What to include in the main.js will be covered in the next section <b>Routing</b>, but for now, assume that is has been finished.  In order to start your server, simply run the command "node server.js".  To test this, use your browser to navigate to "localhost:3000".</p>
		</article>

		<article id="Routing">
			<br>
			<h2>Routing</h2>
			<p>One major difference between Node.js and an Apache server is that a Node.js server does not automatically handle the routing for you.  Instead, you have to handle all of the request for files yourself.  One thing to note is that nearly every request for file by URL is in fact a GET request.</p>
			<p>First we must require express for HTML handling and bodyParser to allow us to parse POST requests.</p>
			<p>The general format for parsing is appname.method("where_request_was_directed", function(request,response){
				Stuff to do.
			}).</p>
			<xmp class="prettyprint linenums">
var express=require('express');
var bodyParser = require('body-parser');
module.exports=function(app)
{
	app.use(bodyParser.urlencoded({
		extended: true
	}));
	app.post('/', function(request, response){
		var name = request.body.user_name;
		var password = request.body.user_password;
		console.log(name);
		console.log(password);
		response.writeHead(200, {'content-type':'text/html'});
		response.write("<center>");
		response.write("Hello " + name);
		response.write("<br><a href=\"/content1\">content1</a>");
		response.write("</center>");
		response.end();
	});
	app.get('/content1',function(request,response){
		response.render('content1.html');
	})
	app.get('/', function(request,response){
		response.render('index.html');
	})
}
			</xmp>
			<p>One thing to note in the post function is how we send a response.  We start with response.writeHead(status,{what_should_included_in_header}).  Typically you'll want to respond with a status of 200 and the header should at least specify the content-type.  The content-type can be anything from plaintext, to in-line HTML, to entire JavaScript and CSS files.  After you are done writing content to send, you will finish with response.end();</p>
			<p>For standard page navigation, express and ejs give us an easy way to display pages simply by using response.render(location_of_file_relative_to_views_directory);</p>
		</article>
		<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
	</body>
</html>